{% extends "base.html" %}

{% block title %}Home - Sentiment Analysis App{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="jumbotron bg-primary text-white text-center py-5 rounded mb-5">
            <div class="container">
                <h1 class="display-4"><i class="fas fa-brain"></i> Sentiment Analysis</h1>
                <p class="lead">Analyze the emotional tone of your text using advanced natural language processing</p>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-8 mx-auto">
        <div class="card shadow-lg">
            <div class="card-header bg-info text-white">
                <h4 class="mb-0"><i class="fas fa-edit"></i> Analyze Your Text</h4>
            </div>
            <div class="card-body">
                <form action="{{ url_for('analyze') }}" method="POST">
                    <div class="mb-3">
                        <label for="text" class="form-label">Enter text to analyze:</label>
                        <textarea class="form-control" id="text" name="text" rows="6" 
                                placeholder="Type or paste your text here... (e.g., 'I love this new product! It's amazing and works perfectly.')" 
                                required maxlength="10000"></textarea>
                        <div class="form-text">
                            <span id="char-count">0</span> / 10,000 characters
                        </div>
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-search"></i> Analyze Sentiment
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="row mt-5">
    <div class="col-12">
        <h3 class="text-center mb-4">What can you do with this app?</h3>
    </div>
</div>

<div class="row">
    <div class="col-md-4 mb-4">
        <div class="card h-100 card-hover shadow">
            <div class="card-body text-center">
                <i class="fas fa-search fa-3x text-primary mb-3"></i>
                <h5 class="card-title">Single Text Analysis</h5>
                <p class="card-text">Analyze individual pieces of text to understand their emotional tone, polarity, and subjectivity.</p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-4">
        <div class="card h-100 card-hover shadow">
            <div class="card-body text-center">
                <i class="fas fa-upload fa-3x text-success mb-3"></i>
                <h5 class="card-title">Batch Processing</h5>
                <p class="card-text">Upload CSV or TXT files to analyze multiple texts at once and get comprehensive results.</p>
                <a href="{{ url_for('batch_analysis') }}" class="btn btn-success btn-sm mt-2">Try Batch Analysis</a>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-4">
        <div class="card h-100 card-hover shadow">
            <div class="card-body text-center">
                <i class="fas fa-chart-bar fa-3x text-warning mb-3"></i>
                <h5 class="card-title">Analytics & History</h5>
                <p class="card-text">View detailed statistics, charts, and history of all your sentiment analyses.</p>
                <a href="{{ url_for('history') }}" class="btn btn-warning btn-sm mt-2">View History</a>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card bg-light">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-info-circle"></i> How It Works</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6><strong>Sentiment Classification:</strong></h6>
                        <ul>
                            <li><span class="badge sentiment-positive">Positive</span> - Polarity > 0.1</li>
                            <li><span class="badge sentiment-negative">Negative</span> - Polarity < -0.1</li>
                            <li><span class="badge sentiment-neutral">Neutral</span> - Polarity between -0.1 and 0.1</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6><strong>Confidence Levels:</strong></h6>
                        <ul>
                            <li><span class="badge confidence-high text-dark">High</span> - |Polarity| ≥ 0.5</li>
                            <li><span class="badge confidence-medium text-dark">Medium</span> - 0.2 ≤ |Polarity| < 0.5</li>
                            <li><span class="badge confidence-low text-dark">Low</span> - |Polarity| < 0.2</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card border-primary">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-lightbulb"></i> Example Texts to Try</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <h6 class="text-success">Positive Examples:</h6>
                        <ul class="list-unstyled">
                            <li><em>"I absolutely love this product!"</em></li>
                            <li><em>"This is the best day ever!"</em></li>
                            <li><em>"Amazing service, highly recommend!"</em></li>
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <h6 class="text-danger">Negative Examples:</h6>
                        <ul class="list-unstyled">
                            <li><em>"This is terrible and disappointing."</em></li>
                            <li><em>"I hate waiting in long lines."</em></li>
                            <li><em>"Worst experience ever, very upset."</em></li>
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <h6 class="text-secondary">Neutral Examples:</h6>
                        <ul class="list-unstyled">
                            <li><em>"The meeting is scheduled for 3 PM."</em></li>
                            <li><em>"This is a table with four legs."</em></li>
                            <li><em>"The weather report shows rain."</em></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const textArea = document.getElementById('text');
    const charCount = document.getElementById('char-count');
    
    // Update character count
    textArea.addEventListener('input', function() {
        const length = textArea.value.length;
        charCount.textContent = length;
        
        if (length > 9000) {
            charCount.className = 'text-danger fw-bold';
        } else if (length > 7000) {
            charCount.className = 'text-warning fw-bold';
        } else {
            charCount.className = 'text-muted';
        }
    });
    
    // Add click handlers for example texts
    document.querySelectorAll('em').forEach(function(em) {
        em.style.cursor = 'pointer';
        em.title = 'Click to use this example';
        em.addEventListener('click', function() {
            textArea.value = em.textContent.replace(/["""]/g, '');
            textArea.dispatchEvent(new Event('input'));
            textArea.focus();
            
            // Scroll to form
            document.getElementById('text').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'center' 
            });
        });
    });
});
</script>
{% endblock %}